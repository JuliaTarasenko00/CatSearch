{"mappings":"gfAAA,IAMiBA,EAWTC,EAhBFC,EAAM,IAAI,EADhBC,EAAA,SACgBC,SAIVC,EAAOC,SAASC,cAAc,YAC9BC,EAAyD,QAA9CR,EAAAS,KAAKC,MAAMC,aAAaC,QAHpB,oBAG0C,IAA9CZ,IAAkD,GAEnEE,EAAIW,sBACDC,MAAK,SAAAC,GACJA,EAAIC,SAAQ,SAAAC,G,IAAGC,EAAED,EAAFC,GAAIC,EAAIF,EAAJE,KACjBC,WAAWF,GAAMC,C,OAGpBE,MAAMC,OAGDrB,EAkEGO,EAjENe,KACC,SAAAN,G,IA2CmBO,EACnBC,EA3CEC,EAAWT,EAAXS,YACAC,EAAaV,EAAbU,cACAC,EAAcX,EAAdW,eACAC,EAASZ,EAATY,UACAC,EAAYb,EAAZa,aACAC,EAAYd,EAAZc,aACAC,EAAcf,EAAde,eACAd,EAAED,EAAFC,GAEIe,EAAMP,EACN,sCAAkDQ,OAAZR,GACtC,4DACES,EAoBd,SAAmBL,EAAcE,GAO/B,YAL0B,IAAjBF,EACHA,EAAaM,MAAM,KAAK,QACE,IAAnBJ,EACPA,EAAeI,MAAM,KAAK,GAC1B,E,CA1BaC,CAAUP,EAAcE,GACjCM,GA8BNb,EAAiB,QACG,KAFDD,EA7BWK,KAgChCJ,EAAiBD,EACde,QAAO,SAAAD,G,YAA0B,IAAVA,C,IACvBf,KAAI,SAAAe,GACH,OAAKlB,WAAWkB,GAGTlB,WAAWkB,GAFT,M,KAKXb,EAAee,OAAS,IAC1Bf,EAAiBA,EAAegB,MAAM,EAAG,IAEb,IAA1BhB,EAAee,OACV,OAEFf,EAAeiB,KAAK,OA9CrB,MAAO,8CACHR,OADgDhB,EAAG,mBACtCgB,OAAbD,EAAI,WAImBC,OAJVP,GAAiBC,EAAe,oJAKtBM,OADAP,GAAiBC,EAAe,2CACrBM,OAAXI,EAAM,OACRJ,OADaC,EAAK,yCAGUD,OAF5BH,EAAa,+EAEkBG,OAAHhB,EAAG,8C,IAK3DwB,KAAK,IACRrC,EAAKsC,UAAY1C,C","sources":["src/favorite.js"],"sourcesContent":["import { filmAPI } from './js/API';\nconst API = new filmAPI();\n\nconst KEY_FAVORITE = 'favorite';\n\nconst list = document.querySelector('.js_list');\nconst favorite = JSON.parse(localStorage.getItem(KEY_FAVORITE)) ?? [];\n\nAPI.getCategoriesGenres()\n  .then(res => {\n    res.forEach(({ id, name }) => {\n      categories[id] = name;\n    });\n  })\n  .catch(Error);\n\nfunction markupFilm(favorite) {\n  const markup = favorite\n    .map(\n      ({\n        poster_path,\n        original_name,\n        original_title,\n        genre_ids,\n        release_date,\n        vote_average,\n        first_air_date,\n        id,\n      }) => {\n        let url = poster_path\n          ? `https://image.tmdb.org/t/p/original${poster_path}`\n          : 'https://www.tgv.com.my/assets/images/404/movie-poster.jpg';\n        const year = yearsFilm(release_date, first_air_date);\n        let genre = categoriesFilms(genre_ids);\n        return `<li class=\"search_film_img_wrap\" data-id='${id}'>\n<img src=\"${url}\" alt=\"${original_name || original_title}\"\n  width=\"395\" height=\"574\" class=\"search_film_img\"/>\n<div class=\"wrap\">\n  <div class=\"search_film_wrap\">\n    <p class=\"search_film_title\">${original_name || original_title}</p>\n    <p class=\"search_film_genre\">${genre} | ${year}</p>\n    <p class=\"stars is-hidden\">${vote_average}</p>\n  </div>\n  <button type=\"button\" class=\"js_add_collection\" data-id=\"${id}\">Add to collection</button>\n</div>\n</li>`;\n      }\n    )\n    .join('');\n  list.innerHTML = markup;\n}\n\nfunction yearsFilm(release_date, first_air_date) {\n  const year =\n    typeof release_date !== 'undefined'\n      ? release_date.split('-')[0]\n      : typeof first_air_date !== 'undefined'\n      ? first_air_date.split('-')[0]\n      : '';\n  return year;\n}\n\nfunction categoriesFilms(genreIds) {\n  let categoriesFilm = [];\n  if (typeof genreIds !== 'undefined') {\n    categoriesFilm = genreIds\n      .filter(genre => typeof genre !== 'undefined')\n      .map(genre => {\n        if (!categories[genre]) {\n          return 'Film';\n        }\n        return categories[genre];\n      });\n  }\n  if (categoriesFilm.length > 2) {\n    categoriesFilm = categoriesFilm.slice(0, 2);\n  }\n  if (categoriesFilm.length === 0) {\n    return 'Film';\n  }\n  return categoriesFilm.join(', ');\n}\n\nmarkupFilm(favorite);\n"],"names":["$19661b0c25203147$var$ref","markup","$19661b0c25203147$var$API","parcelRequire","filmAPI","$19661b0c25203147$var$list","document","querySelector","$19661b0c25203147$var$favorite","JSON","parse","localStorage","getItem","getCategoriesGenres","then","res","forEach","param","id","name","categories","catch","Error","map","genreIds","categoriesFilm","poster_path","original_name","original_title","genre_ids","release_date","vote_average","first_air_date","url","concat","year","split","$19661b0c25203147$var$yearsFilm","genre","filter","length","slice","join","innerHTML"],"version":3,"file":"favotite.ff3c556e.js.map"}